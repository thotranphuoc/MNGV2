{"version":3,"sources":["../../src/pages/menu-item-add/menu-item-add.module.ts","../../src/pages/menu-item-add/menu-item-add.ts"],"names":[],"mappings":"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","file":"30.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MenuItemAddPage } from './menu-item-add';\n\n@NgModule({\n  declarations: [\n    MenuItemAddPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MenuItemAddPage),\n  ],\n  exports: [\n    MenuItemAddPage\n  ]\n})\nexport class MenuItemAddPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/menu-item-add/menu-item-add.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController, ModalController } from 'ionic-angular';\n\nimport { LocalService } from '../../services/local.service';\n// import { ImageService } from '../../services/image.service';\nimport { AngularFireService } from '../../services/af.service';\n// import { DbService } from '../../services/db.service';\nimport { AppService } from '../../services/app.service';\nimport { CrudService } from '../../services/crud.service';\nimport { iItem } from '../../interfaces/item.interface';\nimport { iShop } from '../../interfaces/shop.interface';\n@IonicPage()\n@Component({\n  selector: 'page-menu-item-add',\n  templateUrl: 'menu-item-add.html',\n})\nexport class MenuItemAddPage {\n  data: any;\n  SHOP: iShop;\n  loading: any;\n  item: iItem = null;\n  SHOP_ID: string = null;\n  SHOP_IMAGES: string[] = [];\n  base64Image: string = null;\n  base64Images: any[] = [];\n  action: string = 'add-new';\n  hasPosted: boolean = false;\n  isInfoFullFilled: boolean = false;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private loadingCtrl: LoadingController,\n    private alertCtrl: AlertController,\n    private modalCtrl: ModalController,\n    // private app: App,\n    private afService: AngularFireService,\n    // private dbService: DbService,\n    private appService: AppService,\n    private localService: LocalService,\n    private crudService: CrudService,\n    // private imageService: ImageService\n  ) {\n    this.data = this.navParams.data;\n    this.SHOP = this.data.SHOP;\n    if (typeof (this.SHOP) === 'undefined') {\n      this.navCtrl.setRoot('HomePage');\n    } else {\n      this.SHOP_ID = this.SHOP.SHOP_ID;\n      this.item = this.localService.ITEM_DEFAULT;\n      this.loading = this.loadingCtrl.create({\n        content: 'Please wait....',\n        spinner: 'crescent'\n      });\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad MenuItemAddPage');\n  }\n\n  takePhoto() {\n    console.log('takePhoto');\n    let photosModal = this.modalCtrl.create('PhotoTakePage', { PHOTOS: this.base64Images });\n    photosModal.onDidDismiss((data) => {\n      console.log(data);\n      this.base64Images = data.PHOTOS;\n      this.item.ITEM_IMG_SHARED = false;\n      // if(this.base64Images){\n      //   this.base64Images = this.base64Images.concat(data.PHOTOS)\n      // }else{\n      //   this.base64Images = data.PHOTOS;\n      // }\n    });\n    photosModal.present();\n  }\n\n  selectPhoto() {\n    console.log('selectPhoto');\n    let photosModal = this.modalCtrl.create('PhotoSelectPage', { KEY: this.item.ITEM_NAME_EN, PHOTOS: this.base64Images });\n    photosModal.onDidDismiss((data) => {\n      console.log(data);\n      this.base64Images = data.PHOTOS;\n      this.item.ITEM_IMG_SHARED = true;\n      this.item.ITEM_IMAGES = data.PHOTOS;\n      // if(this.base64Images){\n      //   this.base64Images = this.base64Images.concat(data.PHOTOS)\n      // }else{\n      //   this.base64Images = data.PHOTOS;\n      // }\n    });\n    photosModal.present();\n  }\n\n  createItem() {\n    this.checkInfoFullFilled();\n    console.log(this.base64Images);\n    if (this.isInfoFullFilled) {\n      console.log(this.base64Images);\n      if (this.afService.getAuth().auth.currentUser) {\n        // user signed in\n        this.startLoading();\n        this.item.ITEM_DATE_CREATE = this.appService.getCurrentDataAndTime().toString();\n        this.item.ITEM_SHOP_ID = this.SHOP_ID;\n        console.log(this.item);\n        console.log(this.base64Images);\n        this.crudService.createItem(this.item.ITEM_SHOP_ID, this.item, this.base64Images).then(() => {\n          console.log('update item image successs');\n          this.hideLoading();\n          this.resetItem();\n          this.navCtrl.pop();\n        })\n          .catch((err) => {\n            this.showErr1(err);\n            this.hideLoading();\n          })\n      } else {\n        // user not signed in yet\n        this.hasPosted = false;\n        this.alertMsgWithConfirmationToGoToAccountPage();\n      }\n\n    } else {\n      // info not fullfilled\n      this.hasPosted = false;\n      this.appService.alertMsg('Notice', 'Information or Photo missing');\n    }\n  }\n\n  checkInfoFullFilled() {\n    this.isInfoFullFilled = true;\n    if (this.item.ITEM_NAME_LOCAL == null || this.item.ITEM_NAME_LOCAL == '') {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_NAME_LOCAL, 'NAME_LOCAL is missed');\n    }\n    if (this.item.ITEM_NAME_EN == null || this.item.ITEM_NAME_EN == '') {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_NAME_EN, 'NAME_EN is missed');\n    }\n    if (this.item.ITEM_PRICE == null) {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_PRICE, 'PRICE is missed');\n    }\n    if (this.item.ITEM_SIZE == null || this.item.ITEM_SIZE == '') {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_SIZE, 'size is missed');\n    }\n\n    if (this.base64Images.length < 1) {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_IMAGES, 'images is missed');\n    }\n\n    console.log(this.isInfoFullFilled, '<--isInfoFullfilled?');\n  }\n\n  // LOADING\n  private startLoading() {\n    this.loading.present();\n    setTimeout(() => {\n      this.hideLoading();\n    }, 20000)\n  }\n\n  private hideLoading() {\n    this.loading.dismiss().catch((err) => { console.log(err) });\n  }\n\n\n  alertMsgWithConfirmationToGoToAccountPage() {\n    this.alertCtrl.create({\n      title: 'Not Signed',\n      message: 'Plz login to continue',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n\n          }\n        },\n        {\n          text: 'OK',\n          handler: () => {\n            console.log('go to Account page to login ');\n            this.navCtrl.push('AccountPage', { action: 'request-login' });\n          }\n        }\n      ]\n    }).present();\n  }\n\n  // check again required or not\n  resetItem() {\n    this.localService.ITEM = this.localService.ITEM_DEFAULT;\n    this.localService.ITEM_IMG64s = this.localService.ITEM_IMG64s_DEFAULT;\n  }\n\n  // ERROR HANDLING\n  showErr(err) {\n    console.log(err);\n    this.appService.alertError('Error', err);\n  }\n\n  showErr1(err) {\n    console.log(err);\n    this.appService.alertError('Error', err);\n    this.hasPosted = false;\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/menu-item-add/menu-item-add.ts"],"sourceRoot":""}