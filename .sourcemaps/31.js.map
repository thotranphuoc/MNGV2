{"version":3,"sources":["../../src/pages/order-daily-statistic/order-daily-statistic.module.ts","../../src/pages/order-daily-statistic/order-daily-statistic.ts"],"names":[],"mappings":"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","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderDailyStatisticPage } from './order-daily-statistic';\n\n@NgModule({\n  declarations: [\n    OrderDailyStatisticPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderDailyStatisticPage),\n  ],\n  exports: [\n    OrderDailyStatisticPage\n  ]\n})\nexport class OrderDailyStatisticPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-daily-statistic/order-daily-statistic.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavParams, NavController } from 'ionic-angular';\n\nimport { AppService } from '../../services/app.service';\nimport { StatisticService } from '../../services/statistic.service';\n// import { DbService } from '../../services/db.service';\nimport { LocalService } from '../../services/local.service';\nimport { GchartService } from '../../services/gchart.service';\n// import { iOrder } from '../../interfaces/order.interface';\nimport { iItem } from '../../interfaces/item.interface';\n\ndeclare var google: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-order-daily-statistic',\n  templateUrl: 'order-daily-statistic.html',\n})\nexport class OrderDailyStatisticPage {\n  data: any;\n  DATE: string = '2017/07/29';\n  selectedDate: string = null;\n  SHOP_ID: string = '-Kp98d8gamYNpWHiDAVf';\n  SHOP_ITEMS: iItem[] = [];\n  SHOP_ITEMS_ID: string[] = [];\n  ORDER_LISTS: any[] = [];\n  // ORDER_filter_list: any[] = [];\n  finalSUM: any[] = [];\n  // DATA2CHART: any[] = [];\n  TOTAL_PRICE: number = 0;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private appService: AppService,\n    // private dbService: DbService,\n    private statService: StatisticService,\n    private localService: LocalService,\n    private gchartService: GchartService\n  ) {\n    this.data = this.navParams.data;\n    this.SHOP_ID = this.data.SHOP_ID;\n    if (typeof (this.SHOP_ID) === 'undefined') {\n      this.navCtrl.setRoot('HomePage')\n        .catch((err) => { console.log(err) });\n    }\n    this.DATE = this.appService.getCurrentDate();\n    this.SHOP_ITEMS = this.localService.SHOP_ITEMS;\n    this.SHOP_ITEMS_ID = this.localService.SHOP_ITEMS_ID;\n    if (this.SHOP_ITEMS_ID.length < 1) {\n      console.log('SHOP_ITEMS, ID are not available yet. getting them...');\n      this.localService.getSHOP_ITEMSnSHOP_ITEMS_ID(this.SHOP_ID)\n        .then((data: any) => {\n          this.SHOP_ITEMS = data.SHOP_ITEMS;\n          this.SHOP_ITEMS_ID = data.SHOP_ITEMS_ID;\n          console.log(this.SHOP_ITEMS, this.SHOP_ITEMS_ID);\n        })\n        .then(() => {\n          this.getDataThenDrawChart();\n        })\n        .catch((err) => { console.log(err) });\n    } else {\n      this.getDataThenDrawChart();\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad OrderStatisticPage');\n  }\n\n  ionViewWillEnter() {\n    // this.selectedDate = '2017-07-31';\n    this.selectedDate = this.appService.convertDateFormat1(this.DATE);\n    console.log(this.DATE, this.selectedDate);\n  }\n\n  getDataThenDrawChart() {\n    this.statService.getSUMofDATE(this.DATE, this.SHOP_ID, this.SHOP_ITEMS, this.SHOP_ITEMS_ID)\n      .then((res: any) => {\n        console.log(res.TotalOfDATE, res.DATA4CHART);\n        this.TOTAL_PRICE = res.TotalOfDATE;\n        this.finalSUM = res.finalSUM;\n        this.drawPieBarChart(res.DATA4CHART);\n      })\n      .catch((err) => { console.log(err) });\n  }\n\n  selectDate() {\n    console.log('start selectDate()');\n    console.log(this.selectedDate);\n    if (this.selectedDate != null) {\n      this.DATE = this.selectedDate.substr(0, 4) + '/' + this.selectedDate.substr(5, 2) + '/' + this.selectedDate.substr(8, 2);\n    } else {\n      this.appService.alertMsg('Alert', 'Choose date to show');\n    }\n    console.log(this.DATE);\n    this.getDataThenDrawChart();\n  }\n\n  drawPieBarChart(DATA2CHART) {\n    console.log('start drawChart()');\n    google.charts.load('current', { 'packages': ['corechart'] }).then(() => {\n      let chart1 = new google.visualization.PieChart(document.getElementById('chart_div1'));\n      let chart2 = new google.visualization.BarChart(document.getElementById('chart_div2'));\n      let DATAS: any[] = DATA2CHART;\n      this.gchartService.drawChart('Total on ' + this.DATE, 320, 300, DATAS).then((res: any) => {\n        chart1.draw(res.data, res.options);\n        chart2.draw(res.data, res.options);\n      })\n        .catch((err) => { console.log(err) });\n    })\n  }\n\n}\n\n/*\nEXPECTED OUTCOME:\n\n1. SHOP_ITEMS & SHOP_ITEMS_ID\n2. ORDERS with Filter\n3. SUM of each ITEMS\n4. TotalPRICE of the day\n5. Array Data4Chart\n\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-daily-statistic/order-daily-statistic.ts"],"sourceRoot":""}