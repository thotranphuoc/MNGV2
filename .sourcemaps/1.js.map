{"version":3,"sources":["../../src/pages/update-item/update-item.module.ts","../../src/pages/update-item/update-item.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UpdateItemPage } from './update-item';\n\n@NgModule({\n  declarations: [\n    UpdateItemPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(UpdateItemPage),\n  ],\n  exports: [\n    UpdateItemPage\n  ]\n})\nexport class UpdateItemPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/update-item/update-item.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';\nimport { ImageService } from '../../services/image.service';\nimport { DbService } from '../../services/db.service';\nimport { AppService } from '../../services/app.service';\nimport { CrudService } from '../../services/crud.service';\nimport { iItem } from '../../interfaces/item.interface';\n@IonicPage()\n@Component({\n  selector: 'page-update-item',\n  templateUrl: 'update-item.html',\n})\nexport class UpdateItemPage {\n  SHOP_ITEM: iItem = null;\n  base64Images: any[];\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private actionSheetCtrl: ActionSheetController,\n    private imageService: ImageService,\n    private dbService: DbService,\n    private crudService: CrudService,\n    private appService: AppService\n  ) {\n    this.SHOP_ITEM = this.navParams.get('SHOP_ITEM');\n    if (typeof (this.SHOP_ITEM) == 'undefined') {\n      this.SHOP_ITEM = null\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad UpdateItemPage');\n  }\n\n  clickImage(image, i) {\n    console.log(image, i)\n    let actionSheet = this.actionSheetCtrl.create({\n      buttons: [\n        {\n          text: 'Update photo',\n          handler: () => {\n            console.log('Update photo clicked');\n            this.takePhoto(image);\n          }\n        }, {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n\n  takePhoto(image){\n    this.selectPhotosByBrowser(image);\n  }\n\n  selectPhotosByBrowser(image){\n    document.getElementById('inputFile').click();\n  }\n\n  takePictureAndResizeByBrowser(event) {\n    this.imageService.resizeImagesFromChoosenFilesReturnPromiseWithArrayOfImageDataUrls(event)\n      .then((imgDataUrls: string[]) => {\n        setTimeout(() => {\n          console.log(imgDataUrls);\n          this.base64Images = imgDataUrls;\n          let NAME = new Date().getTime().toString();\n          \n          this.dbService.uploadBase64Images2FBReturnPromiseWithArrayOfURL('ItemImages/' + this.SHOP_ITEM.ITEM_ID, this.base64Images, NAME)\n          .then((urls)=>{\n            // upload ITEM_IMAGES then delete the old ITEM_IMAGE\n            this.dbService.updateAnObjectAtNode('Items/' + this.SHOP_ITEM.ITEM_ID + '/ITEM_IMAGES', urls);\n            // delete old image firebase storage\n            this.dbService.deleteFileFromFireStorageWithHttpsURL(this.SHOP_ITEM.ITEM_IMAGES[0]).then((res)=>{\n              // update\n              this.SHOP_ITEM.ITEM_IMAGES = urls;\n            })\n            .catch((err)=>{\n              console.log(err)\n            })\n            \n          })\n        }, 1000);\n      })\n  }\n\n  update(){\n    console.log(this.SHOP_ITEM);\n    this.crudService.updateItem(this.SHOP_ITEM);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/update-item/update-item.ts"],"sourceRoot":""}