{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n  ],\n  exports: [\n    ProfilePage\n  ]\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage, NavController, NavParams,\n  // ModalController \n} from 'ionic-angular';\n\n// import { AngularFireService } from '../../services/af.service';\nimport { DbService } from '../../services/db.service';\nimport { AppService } from '../../services/app.service';\nimport { ImageService } from '../../services/image.service';\nimport { LocalService } from '../../services/local.service';\nimport { iProfile } from '../../interfaces/profile.interface';\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n  PROFILE_OLD: any;\n  PROFILE: iProfile = {\n    PROFILE_AVATAR_URL: '',\n    PROFILE_NAME: '',\n    PROFILE_EMAIL: '',\n    PROFILE_BIRTHDAY: '',\n    PROFILE_TEL: '',\n    PROFILE_ADDRESS: '',\n    PROFILE_STATE: '',\n    PROFILE_VERIFIED: false,\n    PROFILE_UID: '',\n    PROFILE_PROVIDER: '',\n    PROFILE_IDENTIFIER: '',\n    PROFILE_CREATED: '',\n    PROFILE_OTHERS: null\n  }\n  USER: any;\n  // USER_ID: string = null;\n  // USER_EMAIL: string = null;\n  action: string = 'edited-by-owner';\n  btnEnable: boolean = true;\n  base64Images: string[] = [];\n  hasNewAvatar: boolean = false;\n  data: any;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private dbService: DbService,\n    private appService: AppService,\n    private imageService: ImageService,\n    private localService: LocalService) {\n    this.PROFILE = this.localService.PROFILE;\n    this.data = this.navParams.data;\n    console.log(this.data);\n    let act = this.data.action;\n    if (typeof (act) != 'undefined') {\n      this.action = act;\n    } else {\n      this.navCtrl.setRoot('HomePage');\n    }\n\n    // user update by their own;\n    if (this.action === 'edited-by-owner') {\n      // this.USER = this.afService.getAuth().auth.currentUser;\n      this.USER = this.data.USER;\n      if (this.USER != null) {\n        // this.USER_ID = this.USER.uid;\n        // this.USER_EMAIL = this.USER.email;\n        this.getProfile(this.USER.uid);\n        this.PROFILE.PROFILE_EMAIL = this.USER.email;\n      }\n    } else {\n      // edited by admin\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ProfilePage');\n  }\n\n  getProfile(USER_ID: string) {\n    console.log(USER_ID);\n    this.dbService.getOneItemReturnPromise('UserProfiles/' + USER_ID)\n      .then((res: iProfile) => {\n        console.log(res);\n        if (res != null) {\n          this.localService.PROFILE_OLD = res;\n          this.PROFILE = res\n          this.base64Images[0] = this.PROFILE.PROFILE_AVATAR_URL;\n        } else {\n          console.log('User does not update profile yet');\n        }\n      })\n      .catch((err) => { console.log(err) })\n  }\n\n  onUpdateProfile(form) {\n    if (this.USER.uid) {\n      if (this.hasNewAvatar) {\n        this.uploadImages(this.base64Images)\n          .then((res: string[]) => {\n            this.PROFILE.PROFILE_AVATAR_URL = res[0];\n            console.log(this.PROFILE);\n            this.dbService.insertAnObjectAtNode('UserProfiles/' + this.USER.uid, this.PROFILE)\n              .then((res) => {\n                console.log(res);\n                this.resetDefault();\n                this.appService.toastMsg('Successfully changed', 3000);\n                this.navCtrl.pop();\n              })\n              .catch((err) => { console.log(err) })\n          })\n          .catch((err) => { console.log(err) })\n      } else {\n        console.log(this.PROFILE);\n        this.dbService.insertAnObjectAtNode('UserProfiles/' + this.USER.uid, this.PROFILE)\n          .then((res) => {\n            console.log(res);\n            this.resetDefault();\n            this.navCtrl.pop();\n            this.appService.toastMsg('Successfully changed', 3000);\n          })\n          .catch((err) => { console.log(err) })\n      }\n    } else {\n      console.log('User not logged in');\n      this.appService.toastMsg('User not logged in', 3000);\n    }\n  }\n\n  selectPhotoByBrowser() {\n    console.log('select photo')\n    document.getElementById('inputFile').click();\n  }\n\n  takePictureAndResizeByBrowser(event) {\n    this.imageService.resizeImagesFromChoosenFilesReturnPromiseWithArrayOfImageDataUrls(event)\n      .then((imgDataUrls: string[]) => {\n        setTimeout(() => {\n          console.log(imgDataUrls);\n          this.base64Images = imgDataUrls\n          this.hasNewAvatar = true;\n        }, 2000)\n      })\n      .catch((err) => { console.log(err) })\n  }\n\n  uploadImages(images: string[]) {\n    let URL = 'Avatar/' + this.USER.uid;\n    let NAME = this.USER.uid;\n    return this.dbService.uploadBase64Images2FBReturnPromiseWithArrayOfURL(URL, images, NAME);\n  }\n\n  resetDefault() {\n    this.hasNewAvatar = false;\n    this.localService.PROFILE = this.localService.PROFILE_DEFAULT;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}