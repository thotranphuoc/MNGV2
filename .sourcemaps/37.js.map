{"version":3,"sources":["../../src/pages/list/list.module.ts","../../src/pages/list/list.ts"],"names":[],"mappings":"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","file":"37.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ListPage } from './list';\n\n@NgModule({\n  declarations: [\n    ListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ListPage),\n  ],\n  exports: [\n    ListPage\n  ]\n})\nexport class ListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list/list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { ClipboardService } from '../../services/clipboard.service';\nimport { AppService } from '../../services/app.service';\nimport { GmapService } from '../../services/gmap.service';\nimport { LocalService } from '../../services/local.service';\nimport { iShop } from '../../interfaces/shop.interface';\n\n@IonicPage()\n@Component({\n  selector: 'page-list',\n  templateUrl: 'list.html',\n})\nexport class ListPage {\n  data: any;\n  shop: iShop;\n  shopList: any[] = [];\n  isBackable: boolean = false;\n  USER_LOCATION: any;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private localService: LocalService,\n    private gmapService: GmapService,\n    private clipboardService: ClipboardService,\n    private appService: AppService\n  ) {\n    this.data = this.navParams.data;\n    this.shopList = this.data.shops;\n    console.log(this.data);\n    console.log(this.shopList);\n    if (typeof (this.shopList) !== 'undefined') {\n      this.isBackable = true;\n      this.addDistanceThenSorted();\n    } else {\n      this.isBackable = false;\n      if(this.localService.SHOPs_NEARBY_DETAIL.length>0){\n        console.log(this.localService.SHOPs_NEARBY_DETAIL)\n        this.shopList = Array.from(new Set(this.localService.SHOPs_NEARBY_DETAIL));\n        this.addDistanceThenSorted();\n      }else{\n        // this.navCtrl.setRoot('HomePage');\n      }\n      \n    }\n  }\n\n  addDistanceThenSorted(){\n    this.shopList.forEach((shop: iShop) => {\n      shop['distance'] = this.gmapService.getDistanceFromCurrent(shop.SHOP_LOCATION.lat, shop.SHOP_LOCATION.lng);\n    })\n    console.log(this.shopList);\n    this.shopList.sort((a, b) => {\n      let ax = a.distance.distance;\n      let bx = b.distance.distance;\n      return ax - bx;\n    })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ListPage');\n  }\n\n  go2Shop(shop: iShop) {\n    console.log(shop.SHOP_OTHER);\n    if('SHOP_OTHER' in shop){\n      console.log(shop.SHOP_OTHER);\n\n      // if isVERIFIED exist\n      if('isVERIFIED' in shop.SHOP_OTHER){\n        if(shop.SHOP_OTHER.isVERIFIED){\n          console.log('isVERIFIED TRUE');\n          this.navCtrl.setRoot('Shop2Page', { SHOP: shop });\n        }else{\n          console.log('isVERIFIED FALSE');\n          this.navCtrl.setRoot('Shop1Page', { SHOP: shop });\n        }\n      }else{\n        console.log('isVERIFIED not exist');\n        this.navCtrl.setRoot('Shop1Page', { SHOP: shop });\n      }\n    }else{\n      console.log('no SHOP_OTHER')\n      this.navCtrl.setRoot('Shop1Page', { SHOP: shop });\n    }\n  }\n\n  go2Map() {\n    if (this.isBackable) {\n      this.navCtrl.pop();\n    } else {\n      this.navCtrl.setRoot('MapPage');\n    }\n  }\n\n  go2ShopDetailView(shop){\n    console.log('go2ShopDetailView', shop);\n    this.navCtrl.push('ShopDetailViewPage', { SHOP: shop});\n  }\n\n   //click and paste shareable url\n   shareShop(SHOP: iShop){\n    let copiedString = 'menu2book.com/#/mapx/'+SHOP.SHOP_ID;\n    console.log(copiedString);\n    this.clipboardService.copy(copiedString)\n    .then((res)=>{\n      console.log(res);\n      // alert(copiedString + ' copied');\n      this.appService.toastMsgWithPosition('Copied !', 3000, 'middle');\n    })\n    .catch((err)=>{\n      console.log(err);\n    })\n  }\n\n  showShopOnMap(SHOP: iShop){\n    this.navCtrl.setRoot('MPage', { SHOP: SHOP});\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list/list.ts"],"sourceRoot":""}