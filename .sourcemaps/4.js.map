{"version":3,"sources":["../../src/pages/test/test.module.ts","../../src/pages/test/test.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TestPage } from './test';\n\n@NgModule({\n  declarations: [\n    TestPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(TestPage),\n  ],\n})\nexport class TestPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/test/test.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\n\nimport { DbService } from '../../services/db.service';\nimport { AngularFireService } from '../../services/af.service';\nimport { iItem } from '../../interfaces/item.interface';\nimport { iShop } from '../../interfaces/shop.interface';\nimport { Observable } from 'rxjs/Observable';\n@IonicPage()\n@Component({\n  selector: 'page-test',\n  templateUrl: 'test.html',\n})\nexport class TestPage {\n  ITEMS: iItem[] =[];\n  SHOPS: Observable<any[]>;\n  base64Images: string[] =[];\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    private modalCtrl: ModalController,\n    private dbService: DbService,\n    private afService: AngularFireService\n  ) {\n    // this.checkItems();\n    // this.checkShops();\n    this.checkShopImages();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad TestPage');\n  }\n\n  checkItems(){\n    this.dbService.getListReturnPromise_ArrayOfData('Items/')\n    .then((res: iItem[])=>{\n      console.log(res);\n      res.forEach(item =>{\n        if(!item.ITEM_CATEGORY){\n          console.log(item);\n          this.dbService.updateAnObjectAtNode('Items/'+item.ITEM_ID+'/ITEM_CATEGORY', 'Drinks')\n          .then((res)=>{ console.log(res)})\n          .catch((err)=>{ console.log(err)});\n        }\n\n        // let index = item.ITEM_IMAGES[0].indexOf()\n        if(item.ITEM_IMAGES.length<2){\n          console.log(item);\n          this.dbService.updateAnObjectAtNode('Items/'+item.ITEM_ID+'/ITEM_IMAGES', res[0].ITEM_IMAGES)\n          .then((res)=>{ console.log(res)})\n          .catch((err)=>{ console.log(err)});\n        }\n      })\n    })\n    .catch((err)=>{\n      console.log(err);\n    })\n  }\n\n  checkShops(){\n    this.dbService.getListReturnPromise_ArrayOfData('Shops/')\n    .then((res: iShop[])=>{\n      console.log(res);\n      res.forEach((shop: iShop) =>{\n        if(!shop.SHOP_CATEGORIES){\n          console.log(shop);\n          this.dbService.updateAnObjectAtNode('Shops/'+shop.SHOP_ID+'/SHOP_CATEGORIES', ['Drinks','Foods'])\n          .then((res)=>{ console.log(res, shop )})\n          .catch((err)=>{ console.log(err)});\n        }\n      })\n    })\n    .catch((err)=>{\n      console.log(err);\n    })\n  }\n\n  checkShopImages(){\n    this.SHOPS = this.afService.getList('Shops/');\n    // this.dbService.getListReturnPromise_ArrayOfData('Shops/')\n    // .then((res: iShop[])=>{\n    //   console.log(res);\n    //   this.SHOPS = res;\n    //   // res.forEach((shop: iShop) =>{\n    //   //   if(shop.SHOP_IMAGES.length==2){\n    //   //     console.log(shop);\n    //   //     this.dbService.deleteFilesFromFireStorageWithHttpsURL(shop.SHOP_IMAGES)\n    //   //     .then((res)=>{\n    //   //       console.log(res);\n    //   //     })\n    //   //     .catch((err)=>{ console.log(err)});\n    //   //     // this.dbService.updateAnObjectAtNode('Shops/'+shop.SHOP_ID+'/SHOP_CATEGORIES', ['Drinks','Foods'])\n    //   //     // .then((res)=>{ console.log(res, shop )})\n    //   //     // .catch((err)=>{ console.log(err)});\n    //   //   }\n    //   // })\n    // })\n    // .catch((err)=>{\n    //   console.log(err);\n    // })\n  }\n\n  uploadImage(SHOP: iShop){\n    console.log(SHOP);\n    console.log('takePhotos');\n    // this.selectPhotosByBrowser();\n    let photosModal = this.modalCtrl.create('PhotoTakePage', { PHOTOS: this.base64Images });\n    photosModal.onDidDismiss((data) => {\n      console.log(data);\n      // this.base64Images = data.PHOTOS;\n      // this.hasNewAvatar = true;\n      // SHOP.SHOP_IMAGES = typeof (data) !== 'undefined' ? data.PHOTOS: null;\n      if(typeof(data) !=='undefined'){\n        this.dbService.uploadBase64Images2FBReturnPromiseWithArrayOfURL('ShopImages/'+SHOP.SHOP_ID, data.PHOTOS, SHOP.SHOP_ID)\n        .then((res)=>{\n          this.dbService.updateAnObjectAtNode('Shops/'+SHOP.SHOP_ID+'/SHOP_IMAGES', res)\n          .then((res)=>{ console.log(res) })\n          .catch((err)=> { console.log(err) });\n        })\n        .catch((err)=> { console.log(err) });\n      }\n\n    });\n    photosModal.present()\n      .then((res) => { console.log(res) })\n      .catch((err) => { console.log(err) })\n\n  }\n\n  \n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/test/test.ts"],"sourceRoot":""}