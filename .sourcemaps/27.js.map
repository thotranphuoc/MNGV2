{"version":3,"sources":["../../src/pages/favorite-add/favorite-add.module.ts","../../src/pages/favorite-add/favorite-add.ts"],"names":[],"mappings":"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","file":"27.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FavoriteAddPage } from './favorite-add';\n\n@NgModule({\n  declarations: [\n    FavoriteAddPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FavoriteAddPage),\n  ],\n  exports: [\n    FavoriteAddPage\n  ]\n})\nexport class FavoriteAddPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/favorite-add/favorite-add.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { DbService } from '../../services/db.service';\nimport { AngularFireAuth } from 'angularfire2/auth';\n\n@IonicPage()\n@Component({\n  selector: 'page-favorite-add',\n  templateUrl: 'favorite-add.html',\n})\nexport class FavoriteAddPage {\n  data: any;\n  SHOP_ITEMS: any[] = [];\n  SHOP_ITEMS_ID: string[] = [];\n  shop: any;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private afAuth: AngularFireAuth,\n    private dbService: DbService) {\n    this.data = this.navParams.data;\n    this.SHOP_ITEMS = this.data.SHOP_ITEMS;\n    let l = this.SHOP_ITEMS.length;\n    this.SHOP_ITEMS.forEach(item => {\n      item['isLiked'] = false;\n    })\n    this.shop = this.data.SHOP;\n    console.log(this.data);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad FavoriteAddPage');\n  }\n\n  addFav(item, i) {\n    console.log(item, i);\n    this.SHOP_ITEMS[i].isLiked = !this.SHOP_ITEMS[i].isLiked;\n  }\n\n  ionViewWillEnter() {\n    // get current favorite of shop\n    let USER_ID = this.afAuth.auth.currentUser.uid;\n    let SHOP_ID = this.shop.SHOP_ID;\n    this.dbService.getListReturnPromise_ArrayOfData('Favorites/' + USER_ID + '/' + SHOP_ID).then((res: string[]) => {\n      console.log(res);\n      this.SHOP_ITEMS.forEach(item => {\n        let i = res.indexOf(item.ITEM_ID)\n        if (i < 0) {\n          item['isLiked'] = false;\n        } else {\n          item['isLiked'] = true;\n        }\n      })\n    })\n  }\n\n  ionViewWillLeave() {\n    console.log('ionViewWillLeave called')\n    // update favorite of user\n    let Likes = [];\n    this.SHOP_ITEMS.forEach(item => {\n      if (item.isLiked) {\n        Likes.push(item.ITEM_ID);\n      }\n    })\n    console.log(Likes);\n    let USER_ID = this.afAuth.auth.currentUser.uid;\n    let SHOP_ID = this.shop.SHOP_ID;\n    this.dbService.insertAnObjectAtNode('Favorites/' + USER_ID + '/' + SHOP_ID, Likes).then((res) => {\n      console.log('insert done')\n    })\n      .catch((err) => {\n        console.log(err);\n      })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/favorite-add/favorite-add.ts"],"sourceRoot":""}