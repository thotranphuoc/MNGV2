{"version":3,"sources":["../../src/pages/menu-item-add/menu-item-add.module.ts","../../src/pages/menu-item-add/menu-item-add.ts"],"names":[],"mappings":"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","file":"23.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MenuItemAddPage } from './menu-item-add';\n\n@NgModule({\n  declarations: [\n    MenuItemAddPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MenuItemAddPage),\n  ],\n  exports: [\n    MenuItemAddPage\n  ]\n})\nexport class MenuItemAddPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/menu-item-add/menu-item-add.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, App, AlertController } from 'ionic-angular';\n\nimport { LocalService } from '../../services/local.service';\nimport { ImageService } from '../../services/image.service';\nimport { AngularFireService } from '../../services/af.service';\nimport { DbService } from '../../services/db.service';\nimport { AppService } from '../../services/app.service';\nimport { CrudService } from '../../services/crud.service';\nimport { iItem } from '../../interfaces/item.interface';\n\n@IonicPage()\n@Component({\n  selector: 'page-menu-item-add',\n  templateUrl: 'menu-item-add.html',\n})\nexport class MenuItemAddPage {\n  loading: any;\n  item: iItem = null;\n  SHOP_ID: string = null;\n  SHOP_IMAGES: string[] = [];\n  base64Image: string = null;\n  base64Images: any[] = [];\n  action: string = 'add-new';\n  hasPosted: boolean = false;\n  isInfoFullFilled: boolean = false;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private loadingCtrl: LoadingController,\n    private alertCtrl: AlertController,\n    private app: App,\n    private afService: AngularFireService,\n    private dbService: DbService,\n    private appService: AppService,\n    private localService: LocalService,\n    private crudService: CrudService,\n    private imageService: ImageService) {\n    this.SHOP_ID = this.navParams.get('SHOP_ID');\n    this.item = this.localService.ITEM_DEFAULT;\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait....',\n      spinner: 'crescent'\n    });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad MenuItemAddPage');\n  }\n\n  takePhoto() {\n    this.selectPhotoByBrowser();\n  }\n\n  selectPhotoByBrowser() {\n    console.log('select photo')\n    document.getElementById('inputFile').click();\n  }\n\n  takePictureAndResizeByBrowser(event) {\n    this.imageService.resizeImagesFromChoosenFilesReturnPromiseWithArrayOfImageDataUrls(event)\n      .then((imgDataUrls: string[]) => {\n        setTimeout(() => {\n          console.log(imgDataUrls);\n          this.base64Images = imgDataUrls\n        }, 2000)\n      })\n  }\n\n  createItem() {\n    this.checkInfoFullFilled();\n    console.log(this.base64Images);\n    if (this.isInfoFullFilled) {\n      console.log(this.base64Images);\n      if (this.afService.getAuth().auth.currentUser) {\n        // user signed in\n        this.startLoading();\n        this.item.ITEM_DATE_CREATE = this.appService.getCurrentDataAndTime().toString();\n        this.item.ITEM_SHOP_ID = this.SHOP_ID;\n        console.log(this.item);\n        console.log(this.base64Images);\n        this.crudService.createItem(this.item.ITEM_SHOP_ID, this.item, this.base64Images).then(() => {\n          console.log('update item image successs');\n          this.hideLoading();\n          this.resetItem();\n          this.navCtrl.pop();\n        })\n          .catch((err) => {\n            this.showErr1(err);\n            this.hideLoading();\n          })\n      } else {\n        // user not signed in yet\n        this.hasPosted = false;\n        this.alertMsgWithConfirmationToGoToAccountPage();\n      }\n\n    } else {\n      // info not fullfilled\n      this.hasPosted = false;\n      this.appService.alertMsg('Notice', 'Please fill all information required');\n    }\n  }\n\n  checkInfoFullFilled() {\n    this.isInfoFullFilled = true;\n    if (this.item.ITEM_NAME_LOCAL == null || this.item.ITEM_NAME_LOCAL == '') {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_NAME_LOCAL, 'NAME_LOCAL is missed');\n    }\n    if (this.item.ITEM_NAME_EN == null || this.item.ITEM_NAME_EN == '') {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_NAME_EN, 'NAME_EN is missed');\n    }\n    if (this.item.ITEM_PRICE == null) {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_PRICE, 'PRICE is missed');\n    }\n    if (this.item.ITEM_SIZE == null || this.item.ITEM_SIZE == '') {\n      this.isInfoFullFilled = false;\n      console.log(this.item.ITEM_SIZE, 'size is missed');\n    }\n\n    // DONT KNOW WHY BELOW SET this.base64Images = null\n    // if (this.base64Images == null) {\n    //   this.isInfoFullFilled = false;\n    //   console.log(this.base64Image, 'image is missed');\n    // } else {\n    //   if (this.base64Images.length = 0) {\n    //     this.isInfoFullFilled = false;\n    //     console.log(this.base64Image, 'image is missed');\n    //   }\n    // }\n    console.log(this.isInfoFullFilled, '<--isInfoFullfilled?');\n  }\n\n  // LOADING\n  private startLoading() {\n    this.loading.present();\n    setTimeout(() => {\n      this.hideLoading();\n      // alert('Please turn on internet and location permission. Then open app again')\n    }, 20000)\n  }\n\n  private hideLoading() {\n    this.loading.dismiss();\n  }\n\n  // private hideLoadingWithMessage(message: string) {\n  //   this.loading.dismiss();\n  //   this.appService.alertMsg('Alert', message);\n  //   // this.go2Page('HomePage')\n  //   this.navCtrl.pop();\n  // }\n\n  go2Page(page: string) {\n    const root = this.app.getRootNav();\n    root.setRoot(page);\n  }\n\n  alertMsgWithConfirmationToGoToAccountPage() {\n    this.alertCtrl.create({\n      title: 'Not Signed',\n      message: 'Plz login to continue',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n\n          }\n        },\n        {\n          text: 'OK',\n          handler: () => {\n            console.log('go to Account page to login ');\n            // this.navCtrl.popToRoot();\n            this.navCtrl.push('AccountPage', { action: 'sign-in' });\n          }\n        }\n      ]\n    }).present();\n  }\n\n  resetItem() {\n    this.localService.ITEM = this.localService.ITEM_DEFAULT;\n    this.localService.ITEM_IMG64s = this.localService.ITEM_IMG64s_DEFAULT;\n  }\n\n  ionViewWillEnter() {\n    this.base64Images = this.localService.ITEM_IMG64s;\n    this.item = this.localService.ITEM;\n  }\n\n  // ionViewWillLeave() {\n  //   this.localService.ITEM = this.item;\n  //   this.localService.ITEM_IMG64s = this.base64Images;\n  // }\n\n  // test() {\n  //   // console.log(this.base64Images)\n  //   let res: any;\n  //   // res = this.afService.getObject('Items/-Kp5VaG76oBUeHsGftNC/IMAGES');\n  //   this.dbService.getListReturnPromise_ArrayOfData('Items/-Kp5VaG76oBUeHsGftNC/IMAGES')\n  //     .then((res) => {\n  //       console.log(res);\n  //     })\n\n  //   this.dbService.getListReturnPromise_ArrayOfKey('Items/-Kp5VaG76oBUeHsGftNC/IMAGES')\n  //     .then((res) => {\n  //       console.log(res);\n  //     })\n\n  //   this.dbService.getListReturnPromise_ArrayOfObjectWithKey_Data('Items/-Kp5VaG76oBUeHsGftNC/IMAGES')\n  //     .then((res) => {\n  //       console.log(res);\n  //     })\n\n  // }\n\n  // ERROR HANDLING\n  showErr(err) {\n    console.log(err);\n    this.appService.alertError('Error', err);\n  }\n\n  showErr1(err) {\n    console.log(err);\n    this.appService.alertError('Error', err);\n    this.hasPosted = false;\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/menu-item-add/menu-item-add.ts"],"sourceRoot":""}