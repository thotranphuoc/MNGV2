{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"23.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n  ],\n  exports: [\n    ProfilePage\n  ]\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage, NavController, NavParams,\n  ModalController\n} from 'ionic-angular';\n\n// import { AngularFireService } from '../../services/af.service';\nimport { DbService } from '../../services/db.service';\nimport { CrudService } from '../../services/crud.service';\nimport { AppService } from '../../services/app.service';\nimport { ImageService } from '../../services/image.service';\nimport { LocalService } from '../../services/local.service';\nimport { iProfile } from '../../interfaces/profile.interface';\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n  // PROFILE_OLD: any;\n  PROFILE: iProfile = {\n    PROFILE_AVATAR_URL: '',\n    PROFILE_NAME: '',\n    PROFILE_EMAIL: '',\n    PROFILE_BIRTHDAY: '',\n    PROFILE_TEL: '',\n    PROFILE_ADDRESS: '',\n    PROFILE_STATE: '',\n    PROFILE_VERIFIED: false,\n    PROFILE_UID: '',\n    PROFILE_PROVIDER: '',\n    PROFILE_IDENTIFIER: '',\n    PROFILE_CREATED: '',\n    PROFILE_OTHERS: null\n  }\n  USER: any;\n  action: string = 'edited-by-owner';\n  base64Images: string[] = [];\n  hasNewAvatar: boolean = false;\n  data: any;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private modalCtrl: ModalController,\n    private dbService: DbService,\n    private crudService: CrudService,\n    private appService: AppService,\n    private imageService: ImageService,\n    private localService: LocalService) {\n    this.data = this.navParams.data;\n    console.log(this.data);\n    if (typeof (this.data.action) != 'undefined') {\n      this.action = this.data.action;\n      this.USER = this.data.USER;\n      this.dbService.getOneItemReturnPromise('UserProfiles/' + this.USER.uid)\n        .then((res: iProfile) => {\n          console.log(res);\n          if (res) {\n            this.PROFILE = res;\n          } else {\n            console.log('Profile not exist');\n          }\n        })\n        .catch((err) => { console.log(err) });\n    } else {\n      this.navCtrl.setRoot('HomePage');\n    }\n\n    // user update by their own;\n    if (this.action === 'edited-by-owner') {\n\n    } else {\n      // edited by admin\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ProfilePage');\n  }\n\n  onUpdateProfile(form) {\n    console.log(this.PROFILE);\n    this.PROFILE.PROFILE_UID = this.USER.uid;\n    this.PROFILE.PROFILE_CREATED = this.appService.getCurrentDate();\n    this.PROFILE.PROFILE_IDENTIFIER = 'email';\n\n    if (this.PROFILE.PROFILE_UID) {\n      this.crudService.createProfile(this.PROFILE)\n        .then((res) => {\n          console.log(res);\n          this.appService.toastMsg('Successfully changed', 3000);\n          if (this.hasNewAvatar) {\n            this.uploadImageThenUpdateURL();\n          }\n          this.navCtrl.pop();\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n    } else {\n      console.log('UID empty');\n    }\n  }\n\n  takePhoto() {\n    console.log('take Photo');\n    let photosModal = this.modalCtrl.create('PhotoTakePage', { PHOTOS: this.base64Images });\n    photosModal.onDidDismiss((data) => {\n      console.log(data);\n      this.base64Images = data.PHOTOS;\n      this.hasNewAvatar = true;\n    });\n    photosModal.present()\n      .then((res) => { console.log(res) })\n      .catch((err) => { console.log(err) })\n  }\n\n  uploadImageThenUpdateURL() {\n    console.log(this.PROFILE);\n    this.dbService.uploadBase64Image2FBReturnPromiseWithURL('Avatar/' + this.PROFILE.PROFILE_UID, this.base64Images[0], this.PROFILE.PROFILE_UID)\n      .then((downloadURL: string) => {\n        this.PROFILE.PROFILE_AVATAR_URL = downloadURL;\n        console.log(this.PROFILE);\n        this.dbService.updateAnObjectAtNode('UserProfiles/' + this.PROFILE.PROFILE_UID, this.PROFILE)\n          .then((res) => { console.log(res); })\n          .catch((err) => { console.log(err); });\n      })\n      .catch((err) => console.log(err));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}