{"version":3,"sources":["../../src/pages/shop-order.bk/shop-order.module.ts","../../src/pages/shop-order.bk/shop-order.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ShopOrderPage } from './shop-order';\n\n@NgModule({\n  declarations: [\n    ShopOrderPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ShopOrderPage),\n  ],\n  exports: [\n    ShopOrderPage\n  ]\n})\nexport class ShopOrderPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shop-order.bk/shop-order.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, \n  // AlertController, \n  ActionSheetController } from 'ionic-angular';\n\nimport { LocalService } from '../../services/local.service';\nimport { AngularFireService } from '../../services/af.service';\nimport { AppService } from '../../services/app.service';\n// import { DbService } from '../../services/db.service';\nimport { iItem } from '../../interfaces/item.interface';\nimport { iOrderList } from '../../interfaces/order-list.interface';\nimport { iOrder } from '../../interfaces/order.interface';\nimport { iShop } from '../../interfaces/shop.interface';\nimport { Subscription } from 'rxjs/Subscription';\n@IonicPage()\n@Component({\n  selector: 'page-shop-order',\n  templateUrl: 'shop-order.html',\n})\nexport class ShopOrderPage {\n  SHOP: iShop = null;\n  USER_ID: string = null;\n\n  SHOP_ITEMS: iItem[] = [];\n  SHOP_ITEMS_ID: string[] = [];\n  SHOP_ITEMS_INDEX: any[] = [];\n  isItemUPDATE: boolean = false;\n  isItemNEW: boolean = false;\n  ORDERs_NEW = [];\n  // for unsubcribe\n  subscription: Subscription;\n  Order2Update: iOrder = null;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    // private alertCtrl: AlertController,\n    private actionSheetCtrl: ActionSheetController,\n    private localService: LocalService,\n    private appService: AppService,\n    // private dbService: DbService,\n    private afService: AngularFireService\n  ) {\n    this.SHOP = this.localService.SHOP;\n    this.USER_ID = this.localService.USER_ID;\n\n    if (this.afService.getAuth().auth.currentUser) {\n      this.USER_ID = this.afService.getAuth().auth.currentUser.uid;\n    } else {\n      this.showConfirm();\n    }\n    // 1. getShopITEMS. If ITEM already get, go ahead. If not, start getting\n    this.getShopITEMS();\n    if (this.SHOP_ITEMS.length < 0) {\n      // start get ShopITEM\n      this.localService.getSHOP_ITEMSnSHOP_ITEMS_ID(this.SHOP.SHOP_ID).then((data: any) => {\n        this.SHOP_ITEMS = data.SHOP_ITEMS;\n        this.SHOP_ITEMS_ID = data.SHOP_ITEMS_ID;\n      })\n    }\n\n    // 2. getActiveOrderAsync();\n    if(typeof(this.SHOP) !=='undefined' && this.USER_ID){\n      this.getActiveOrderAsync(this.USER_ID, this.SHOP.SHOP_ID);\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ShopOrderPage');\n  }\n\n  ionViewWillEnter() {\n    console.log('ionViewWillEnter ShopOrderPage');\n    this.getShopITEMS();\n    this.checkItemNEWorUPDATE();\n  }\n\n  ionViewWillLeave() {\n\n  }\n\n  checkItemNEWorUPDATE() {\n    let count: number = 0;\n    this.SHOP_ITEMS_INDEX.forEach(item => {\n      count += item.count;\n    })\n    if (count > 0 && !this.isItemUPDATE) {\n      this.isItemNEW = true;\n    } else if (count > 0 && this.isItemUPDATE) {\n      this.isItemNEW = false;\n    }\n    console.log(this.isItemNEW, this.isItemUPDATE);\n  }\n\n  subtract(i: number) {\n    if (this.SHOP_ITEMS_INDEX[i]) {\n      this.SHOP_ITEMS_INDEX[i].count--;\n    }\n    this.checkItemNEWorUPDATE()\n  }\n\n  add(i: number) {\n    // this.itemIndex[i].count++;\n    this.SHOP_ITEMS_INDEX[i].count++;\n    this.checkItemNEWorUPDATE();\n  }\n\n  sendORDER() {\n    let ORDER_LIST: iOrderList[] = [];\n    this.SHOP_ITEMS_INDEX.forEach((element, index: number, array) => {\n      if (element.count > 0) {\n        ORDER_LIST.push({ item: this.SHOP_ITEMS[index].ITEM_ID, amount: element.count });\n      }\n    });\n    console.log(ORDER_LIST);\n    let SHOP_ID = this.SHOP_ITEMS[0].ITEM_SHOP_ID;\n    let USER_ID = this.afService.getAuth().auth.currentUser != null ? this.afService.getAuth().auth.currentUser.uid : null;\n    let DATETIME = this.appService.getCurrentDataAndTime();\n    let TABLE = 'T01';\n    let ORDER: iOrder = {\n      ORDER_ID: null,\n      ORDER_SHOP_ID: SHOP_ID,\n      ORDER_USER_ID: USER_ID,\n      ORDER_STAFT_ID: USER_ID,\n      ORDER_STATUS: 'SENDING',\n      ORDER_DATE_CREATE: DATETIME,\n      ORDER_DATE_CLOSE: null,\n      ORDER_TABLE: TABLE,\n      ORDER_LIST: ORDER_LIST,\n      ORDER_NOTES: '',\n      ORDER_OTHER: null\n    };\n    let DATE = this.appService.getCurrentDate();\n    if (USER_ID) {\n      this.localService.sendNewOrder(ORDER, SHOP_ID, USER_ID, DATE);\n      this.Order2Update = ORDER;\n      this.resetIndex();\n    } else {\n      alert('Please sign in to continue');\n    }\n  }\n\n  updateORDER() {\n    this.setAction('init-load');\n    let ORDER_LIST: iOrderList[] = [];\n    this.SHOP_ITEMS_INDEX.forEach((element, index: number, array) => {\n      if (element.count > 0) {\n        ORDER_LIST.push({ item: this.SHOP_ITEMS[index].ITEM_ID, amount: element.count });\n      }\n    });\n    console.log(ORDER_LIST);\n    console.log(this.Order2Update);\n    this.localService.updateOrder(ORDER_LIST, this.Order2Update);\n\n    this.resetIndex();\n  }\n\n  resetIndex() {\n    this.SHOP_ITEMS_INDEX.forEach(item => {\n      item.count = 0;\n    })\n    this.localService.SHOP_ITEMS_INDEX = this.SHOP_ITEMS_INDEX;\n    this.setAction('init-load');\n  }\n\n  getShopITEMS() {\n    this.SHOP_ITEMS = this.localService.SHOP_ITEMS;\n    this.SHOP_ITEMS_ID = this.localService.SHOP_ITEMS_ID;\n    this.SHOP_ITEMS_INDEX = this.localService.SHOP_ITEMS_INDEX;\n    console.log(this.SHOP_ITEMS, this.SHOP_ITEMS_INDEX, this.SHOP_ITEMS_ID);\n  }\n\n  // VERIFIED: get Active orders of user\n  getActiveOrderAsync(USER_ID, SHOP_ID) {\n    let URL = 'ActiveOrdersOfUser/' + USER_ID + '/' + SHOP_ID;\n    this.subscription = this.afService.getList(URL).subscribe((ORDERS: iOrder[]) => {\n      console.log(ORDERS);\n      if (ORDERS.length > 0) {\n        this.ORDERs_NEW = [];\n        ORDERS.forEach(ORDER => {\n          let ORDER_LIST_NEW = [];\n          let TOTAL_PRICE = 0;\n          if (ORDER.ORDER_LIST.length > 0) {\n            ORDER.ORDER_LIST.forEach(item => {\n              let index = this.SHOP_ITEMS_ID.indexOf(item.item);\n              ORDER_LIST_NEW.push({ item: this.SHOP_ITEMS[index], amount: item.amount });\n              let PRICE = item.amount * this.SHOP_ITEMS[index].ITEM_PRICE;\n              TOTAL_PRICE += PRICE;\n            })\n          }\n          setTimeout(() => {\n            ORDER['ORDER_LIST_NEW'] = ORDER_LIST_NEW;\n            ORDER['TOTAL_PRICE'] = TOTAL_PRICE;\n            this.ORDERs_NEW.push(ORDER);\n          },20)\n        })\n      }\n    })\n  }\n\n  updateSelectedORDER(order, ind) {\n    this.setAction('update');\n    console.log(this.SHOP_ITEMS_ID, this.SHOP_ITEMS_INDEX);\n    this.updateIndexCount(order).then((res: any[]) => {\n      console.log(res)\n      this.localService.SHOP_ITEMS_INDEX = res;\n      this.SHOP_ITEMS_INDEX = this.localService.SHOP_ITEMS_INDEX;\n    })\n    delete order.ORDER_LIST_NEW;\n    this.Order2Update = order;\n\n  }\n\n  updateIndexCount(order: iOrder) {\n    return new Promise((resolve, reject) => {\n      let IDs = order.ORDER_LIST.map(item => item.item);\n      let shop_items_id = this.SHOP_ITEMS_ID;\n      let shop_items_index = [];\n      shop_items_id.forEach(item => {\n        let ind = IDs.indexOf(item);\n        if (ind < 0) {\n          shop_items_index.push({ count: 0 });\n        } else {\n          shop_items_index.push({ count: order.ORDER_LIST[ind].amount });\n        }\n      })\n      // console.log(shop_items_index);\n      resolve(shop_items_index);\n    })\n\n  }\n\n  setAction(action: string) {\n    switch (action) {\n      case 'new':\n        this.isItemNEW = true;\n        this.isItemUPDATE = false;\n        break;\n      case 'update':\n        this.isItemNEW = false;\n        this.isItemUPDATE = true;\n        break;\n      case 'init-load':\n        this.isItemNEW = false;\n        this.isItemUPDATE = false;\n      default:\n        break;\n    }\n    console.log(this.isItemNEW, this.isItemUPDATE);\n  }\n\n  showConfirm() {\n    let HANDLER1 = ()=>{\n      console.log('Cancel clicked');\n    }\n    let HANDLER2 = ()=>{\n      this.navCtrl.push('AccountPage', { action: 'request-login' });\n    }\n    this.appService.showConfirmationWith2Button('Alert', 'Please login to continue...', 'Cancel', HANDLER1, 'OK', HANDLER2);\n  }\n\n  onClickORDER(order, ind){\n    console.log(order, ind);\n    let actionSheet = this.actionSheetCtrl.create({\n      buttons: [\n        {\n          text: 'Delete',\n          role: 'destructive',\n          handler: () => {\n            // console.log('Destructive clicked');\n            // this.crudService.deleteIssue(ISSUE.key);\n            // let index = this.issuesData.indexOf(ISSUE);\n            // this.issuesData.splice(index, 1);\n          }\n        }, {\n          text: 'Modify',\n          handler: () => {\n            // console.log('Archive clicked');\n            // this.issue = ISSUE.data;\n            // this.isUpdate = true;\n            // this.IssueUpdateKey = ISSUE.key;\n            // this.issue.ISSUE_STATE = 'Open';\n          }\n        }, {\n          text: 'Closed',\n          handler: () => {\n            console.log('Archive clicked');\n            // this.issue = ISSUE.data;\n            // this.issue.ISSUE_STATE = 'Closed';\n            // this.IssueUpdateKey = ISSUE.key;\n            // this.updateIssue();\n          }\n        }, {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shop-order.bk/shop-order.ts"],"sourceRoot":""}