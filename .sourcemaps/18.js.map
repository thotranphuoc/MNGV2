{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n  ],\n  exports: [\n    ProfilePage\n  ]\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { AngularFireService } from '../../services/af.service';\nimport { DbService } from '../../services/db.service';\nimport { AppService } from '../../services/app.service';\nimport { ImageService } from '../../services/image.service';\nimport { LocalService } from '../../services/local.service';\nimport { iProfile } from '../../interfaces/profile.interface';\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n  PROFILE_OLD: any;\n  PROFILE: iProfile = {\n    PROFILE_AVATAR_URL: '',\n    PROFILE_NAME: '',\n    PROFILE_EMAIL: '',\n    PROFILE_BIRTHDAY: '',\n    PROFILE_TEL: '',\n    PROFILE_ADDRESS: '',\n    PROFILE_STATE: '',\n    PROFILE_VERIFIED: false,\n    PROFILE_UID: '',\n    PROFILE_PROVIDER: '',\n    PROFILE_IDENTIFIER: '',\n    PROFILE_CREATED: '',\n    PROFILE_OTHERS: null\n  }\n  USER: any;\n  USER_ID: string = null;\n  USER_EMAIL: string = null;\n  action: string = 'edited-by-owner';\n  btnEnable: boolean = true;\n  base64Images: string[] = null;\n  hasNewAvatar: boolean = false;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private afService: AngularFireService,\n    private dbService: DbService,\n    private appService: AppService,\n    private imageService: ImageService,\n    private localService: LocalService) {\n    this.PROFILE = this.localService.PROFILE;\n    let act = this.navParams.get('action');\n    if (typeof (act) != 'undefined') {\n      this.action = act;\n    }\n\n    // user update by their own;\n    if (this.action === 'edited-by-owner') {\n      this.USER = this.afService.getAuth().auth.currentUser;\n      if (this.USER != null) {\n        this.USER_ID = this.USER.uid;\n        this.USER_EMAIL = this.USER.email;\n        this.getProfile(this.USER_ID);\n        this.PROFILE.PROFILE_EMAIL = this.USER_EMAIL;\n      }\n    } else {\n      // edited by admin\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ProfilePage');\n  }\n\n  getProfile(USER_ID: string) {\n    console.log(USER_ID);\n    this.dbService.getOneItemReturnPromise('UserProfiles/' + USER_ID).then((res: iProfile) => {\n      console.log(res);\n      if (res != null) {\n        this.localService.PROFILE_OLD = res;\n        this.PROFILE = res\n        // this.base64Images[0] = this.PROFILE.AVATAR_URL;\n      } else {\n        console.log('User does not update profile yet');\n      }\n    })\n  }\n\n  onUpdateProfile(form) {\n    if (this.USER_ID) {\n      if (this.hasNewAvatar) {\n        this.uploadImages(this.base64Images).then((res: string[]) => {\n          this.PROFILE.PROFILE_AVATAR_URL = res[0];\n          console.log(this.PROFILE);\n          this.dbService.insertAnObjectAtNode('UserProfiles/' + this.USER_ID, this.PROFILE).then((res) => {\n            console.log(res);\n            this.resetDefault();\n          })\n        })\n      } else {\n        console.log(this.PROFILE);\n        this.dbService.insertAnObjectAtNode('UserProfiles/' + this.USER_ID, this.PROFILE).then((res) => {\n          console.log(res);\n          this.resetDefault();\n          this.appService.toastMsg('Successfully changed', 3000);\n        })\n      }\n    } else {\n      console.log('User not logged in');\n      this.appService.toastMsg('User not logged in', 3000);\n    }\n  }\n\n  selectPhotoByBrowser() {\n    console.log('select photo')\n    document.getElementById('inputFile').click();\n  }\n\n  takePictureAndResizeByBrowser(event) {\n    this.imageService.resizeImagesFromChoosenFilesReturnPromiseWithArrayOfImageDataUrls(event)\n      .then((imgDataUrls: string[]) => {\n        setTimeout(() => {\n          console.log(imgDataUrls);\n          this.base64Images = imgDataUrls\n          this.hasNewAvatar = true;\n        }, 2000)\n      })\n  }\n\n  uploadImages(images: string[]) {\n    let URL = 'Avatar/' + this.USER_ID;\n    let NAME = this.USER_ID;\n    return this.dbService.uploadBase64Images2FBReturnPromiseWithArrayOfURL(URL, images, NAME);\n  }\n\n  resetDefault() {\n    this.hasNewAvatar = false;\n    this.localService.PROFILE = this.localService.PROFILE_DEFAULT;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}