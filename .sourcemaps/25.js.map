{"version":3,"sources":["../../src/pages/order-range-statistic/order-range-statistic.module.ts","../../src/pages/order-range-statistic/order-range-statistic.ts"],"names":[],"mappings":"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","file":"25.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderRangeStatisticPage } from './order-range-statistic';\n\n@NgModule({\n  declarations: [\n    OrderRangeStatisticPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderRangeStatisticPage),\n  ],\n  exports: [\n    OrderRangeStatisticPage\n  ]\n})\nexport class OrderRangeStatisticPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-range-statistic/order-range-statistic.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { AppService } from '../../services/app.service';\nimport { LocalService } from '../../services/local.service';\nimport { StatisticService } from '../../services/statistic.service';\n// import { GchartService } from '../../services/gchart.service';\nimport { iItem } from '../../interfaces/item.interface';\n\ndeclare var google: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-order-range-statistic',\n  templateUrl: 'order-range-statistic.html',\n})\nexport class OrderRangeStatisticPage {\n  selectedDate1: string = null;\n  selectedDate2: string = null;\n\n  DATE: string = '2017/07/29';\n  SHOP_ID: string = '-Kp98d8gamYNpWHiDAVf';\n\n  SHOP_ITEMS: iItem[] = [];\n  SHOP_ITEMS_ID: string[] = [];\n  ORDER_LISTS: any[] = [];\n\n  finalSUM: any[] = [];\n  // TOTAL_PRICE: number = 0;\n  TOTAL_OF_RANGE: number = 0;\n  DateArray: string[] = [];\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private localService: LocalService,\n    private statService: StatisticService,\n    // private gchartService: GchartService,\n    private appService: AppService\n  ) {\n    this.SHOP_ID = this.navParams.get('SHOP_ID');\n    this.DATE = this.appService.getCurrentDate();\n    this.SHOP_ITEMS = this.localService.SHOP_ITEMS;\n    this.SHOP_ITEMS_ID = this.localService.SHOP_ITEMS_ID;\n    if (this.SHOP_ITEMS_ID.length < 1) {\n      console.log('SHOP_ITEMS, ID are not available yet. getting them...');\n      this.localService.getSHOP_ITEMSnSHOP_ITEMS_ID(this.SHOP_ID)\n        .then((data: any) => {\n          this.SHOP_ITEMS = data.SHOP_ITEMS;\n          this.SHOP_ITEMS_ID = data.SHOP_ITEMS_ID;\n          console.log(this.SHOP_ITEMS, this.SHOP_ITEMS_ID);\n        })\n        .then(() => {\n          // this.getDataThenDrawChart();\n        })\n    } else {\n      // this.getDataThenDrawChart();\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad OrderRangeStatisticPage');\n  }\n\n  ionViewWillEnter() {\n    // this.selectedDate = '2017-07-31';\n    this.selectedDate1 = this.appService.convertDateFormat1(this.DATE);\n    this.selectedDate2 = this.selectedDate1;\n    console.log(this.DATE, this.selectedDate1);\n  }\n\n  selectDates() {\n    console.log(this.selectedDate1, this.selectedDate2);\n    this.DateArray = this.appService.getDateArrayFromDate1toDate2(this.selectedDate1, this.selectedDate2);\n    console.log(this.DateArray);\n    this.getDataThenDrawChart().then((res: any[])=>{\n      console.log(res);\n      this.getSUMofTheDays(res);\n    })\n  }\n\n  getDataThenDrawChart() {\n    let promises = [];\n    this.DateArray.forEach((DATE, index) => {\n      promises[index] = new Promise((resolve, reject) => {\n        this.statService.getSUMofDATE(DATE, this.SHOP_ID, this.SHOP_ITEMS, this.SHOP_ITEMS_ID).then((res: any) => {\n          console.log(res);\n          // dailyTotal = dailyTotal.concat([DATE, res.TotalOfDATE]);\n          resolve(res);\n        })\n      });\n    });\n    return Promise.all(promises);\n  }\n\n  getSUMofTheDays(arr: any[]){\n    let dailyTotal: any[] = []\n    this.TOTAL_OF_RANGE = 0;\n    arr.forEach((array, index)=>{\n      this.TOTAL_OF_RANGE += array.TotalOfDATE;\n      dailyTotal.push([this.DateArray[index].substr(5,5), array.TotalOfDATE]);\n    })\n    console.log(dailyTotal);\n    this.drawDailySUM(dailyTotal);\n  }\n\n  drawDailySUM(DATA_ARRAY) {\n    google.charts.load('current', { packages: ['corechart', 'line'] });\n    google.charts.setOnLoadCallback(drawCurveTypes => {\n      var data = new google.visualization.DataTable();\n      data.addColumn('string', 'X');\n      data.addColumn('number', 'Daily Total');\n      // data.addColumn('number', 'Cats');\n\n      data.addRows(DATA_ARRAY)\n\n      // data.addRows([\n      //   [0, 0, 0], [1, 10, 5], [2, 23, 15], [3, 17, 9], [4, 18, 10], [5, 9, 5],\n      //   [6, 11, 3], [7, 27, 19], [8, 33, 25], [9, 40, 32], [10, 32, 24], [11, 35, 27],\n      //   [12, 30, 22], [13, 40, 32], [14, 42, 34], [15, 47, 39], [16, 44, 36], [17, 48, 40],\n      //   [18, 52, 44], [19, 54, 46], [20, 42, 34], [21, 55, 47], [22, 56, 48], [23, 57, 49],\n      //   [24, 60, 52], [25, 50, 42], [26, 52, 44], [27, 51, 43], [28, 49, 41], [29, 53, 45],\n      //   [30, 55, 47], [31, 60, 52], [32, 61, 53], [33, 59, 51], [34, 62, 54], [35, 65, 57],\n      //   [36, 62, 54], [37, 58, 50], [38, 55, 47], [39, 61, 53], [40, 64, 56], [41, 65, 57],\n      //   [42, 63, 55], [43, 66, 58], [44, 67, 59], [45, 69, 61], [46, 69, 61], [47, 70, 62],\n      //   [48, 72, 64], [49, 68, 60], [50, 66, 58], [51, 65, 57], [52, 67, 59], [53, 70, 62],\n      //   [54, 71, 63], [55, 72, 64], [56, 73, 65], [57, 75, 67], [58, 70, 62], [59, 68, 60],\n      //   [60, 64, 56], [61, 60, 52], [62, 65, 57], [63, 67, 59], [64, 68, 60], [65, 69, 61],\n      //   [66, 70, 62], [67, 72, 64], [68, 75, 67], [69, 80, 72]\n      // ]);\n\n      var options = {\n        hAxis: {\n          title: 'Time'\n        },\n        vAxis: {\n          title: 'Daily Total'\n        },\n        series: {\n          1: { curveType: 'function' }\n        }\n      };\n\n      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));\n      chart.draw(data, options);\n    });\n\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-range-statistic/order-range-statistic.ts"],"sourceRoot":""}