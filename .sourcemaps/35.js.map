{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"35.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n  ],\n  exports: [\n    HomePage\n  ]\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { DbService } from '../../services/db.service';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { iPosition } from '../../interfaces/position.interface';\nimport { Geolocation } from '@ionic-native/geolocation';\n// import { AppService } from '../../services/app.service';\nimport { ShopService } from '../../services/shop.service';\nimport { LocalService } from '../../services/local.service';\n// import * as firebase from 'firebase/app';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage {\n  USER_LOCATION: iPosition;\n  USER_LAST_TIME: string;\n  USER_ID = null;\n  IMG = '../../assets/imgs/menugo_144x144.png';\n  SHOPS_ID: any[] = [];\n  SHOPS_LOCATION: any[] = [];\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private dbService: DbService,\n    private afAuth: AngularFireAuth,\n    private geolocation: Geolocation,\n    // private appService: AppService,\n    private shopService: ShopService,\n    private localService: LocalService\n  ) {\n    // this.test();\n    if (this.afAuth.auth.currentUser) {\n      this.USER_ID = this.afAuth.auth.currentUser.uid;\n    }\n    this.geolocation.getCurrentPosition()\n      .then((res) => {\n        console.log(res);\n        this.USER_LOCATION = {\n          lat: res.coords.latitude,\n          lng: res.coords.longitude\n        };\n        this.getShopsNearby(this.USER_LOCATION.lat, this.USER_LOCATION.lng);\n      })\n      .catch((err) => {\n        console.log(err);\n        if (this.USER_ID) {\n          let UID = this.USER_ID;\n          this.dbService.getOneItemReturnPromise('UserPosition/' + UID)\n            .then((res: any) => {\n              this.USER_LOCATION = res.LAST_POSITION;\n              this.USER_LAST_TIME = res.TIME;\n              console.log(res);\n              this.getShopsNearby(this.USER_LOCATION.lat, this.USER_LOCATION.lng);\n            })\n            .catch((err) => {\n              this.USER_LOCATION = { lat: 10.778168043677463, lng: 106.69638633728027 };\n              this.getShopsNearby(this.USER_LOCATION.lat, this.USER_LOCATION.lng);\n            })\n        }\n      })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad HomePage');\n  }\n\n  go2MapPage() {\n    let data = {\n      USER_LOCATION: this.USER_LOCATION,\n      SHOPS_ID: this.SHOPS_ID,\n      SHOPS_LOCATION: this.SHOPS_LOCATION\n    }\n    this.navCtrl.setRoot('MapPage', data);\n  }\n\n  getShopsNearby(LAT: number, LNG: number) {\n    if (!this.localService.SHOP_LOADED) {\n      this.shopService.getShopsNearBy(LAT, LNG)\n        .then((res: any) => {\n          console.log(res);\n          this.SHOPS_ID = res.SHOP_IDs;\n          this.SHOPS_LOCATION = res.SHOP_locations;\n          this.localService.SHOPs_LOCATION = res.SHOP_locations;\n          this.localService.SHOPs_NEARBY = res.SHOP_IDs;\n          this.localService.SHOP_LOADED = true;\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n  }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}